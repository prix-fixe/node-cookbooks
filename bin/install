#!/usr/bin/env ruby

require 'fileutils'

puts "copying cheffile"
['Gemfile','Gemfile.lock','Cheffile'].each do |f|
  file = "./#{f}"
  FileUtils.cp("./#{f}", "../node-chef/.") if File.exists?(file)
end

puts "installing"
`cd ../node-chef && bundle exec librarian-chef install`

puts "copying cookbooks"
FileUtils.cp_r(Dir['../node-chef/cookbooks/*'],'.')

puts "copying cheffile lock"
['Cheffile.lock'].each do |f|
  file = "../node-chef/#{f}"
  FileUtils.cp(file, ".") if File.exists?(file)
end
